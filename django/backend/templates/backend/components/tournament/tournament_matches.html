{% load i18n %}

<div class="card card-height-sm">
    <h4 class="card-header bg-white d-flex justify-content-between align-items-center">
        <div class="p-2">{% translate "Matches" %}</div>
    </h4>
    <div class="card-body table-responsive p-0">
        <table class="table table-borderless table-striped">
            <tbody>
                {% for match in tournament.matches.order_by_state %}
                <tr>
                    <td class="px-3 align-middle">
                        <img src="{{ match.home.get_profile_picture }}" class="avatar-sm rounded-circle" alt="">
                        {% if match.winner == match.guest %}
                        <span class="px-2 link-dark text-decoration-none text-capitalize">
                            <del>{{ match.home.get_display_name }}</del></span>
                        {% else %}
                        <span class="px-2 link-dark text-decoration-none text-capitalize">
                            {{ match.home.get_display_name }}</span>
                        {% endif %}
                    </td>
                    <td class="px-3 align-middle text-center">
                        {% if match.is_waiting %}
                        <form spa action="{% url 'backend:match_mock' %}" method="POST" autocomplete="off">
                            {% csrf_token %}
                            <input type="hidden" name="match_id" value="{{ match.id }}" class="form-control">
                            <div class="input-group">
                                <button type="submit" class="btn btn-link" type="button">
                                    <span class="badge rounded-pill bg-primary">{% translate 'waiting for players' %}</span>
                                </button>
                            </div>
                        </form>
                        {% elif match.is_started %}
                        <span class="badge rounded-pill bg-primary">{% translate 'playing' %}</span>
                        {% elif match.is_finished %}
                        <span class="badge rounded-pill bg-primary">{{ match.home_score }} - {{ match.guest_score }}</span>
                        {% endif %}
                    </td>
                    <td class="px-3 align-middle text-end">
                        {% if match.winner == match.home %}
                        <span class="px-2 link-dark text-decoration-none text-capitalize">
                            <del>{{ match.guest.get_display_name }}</del></span>
                        {% else %}
                        <span class="px-2 link-dark text-decoration-none text-capitalize">
                            {{ match.guest.get_display_name }}</span>
                        {% endif %}
                        <img src="{{ match.guest.get_profile_picture }}" class="avatar-sm rounded-circle" alt="">
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>